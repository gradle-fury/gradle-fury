<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-02-23 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="Date-Creation-yyyymmdd" content="20160101"/>
    <meta name="Date-Revision-yyyymmdd" content="20161016"/>
    <meta http-equiv="Content-Language" content="en"/>
    <title> Gradle Fury</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css"/>
    <link rel="stylesheet" href="./css/site.css"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>

    <link rel="stylesheet" type="text/css" href="./css/bootstrap-sortable.css">


    <script type="text/javascript" src="./js/jquery-1.12.4.min.js"></script>
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>
    <script type="text/javascript" src="./js/bootstrap-sortable.js"></script>
    <script type="text/javascript" src="./js/moment.min.js"></script>
</head>
<body class="topBarDisabled">

<a href="https://github.com/chrisdoyle/gradle-fury">
    <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
    src="./img/forkme_right_gray_6d6d6d.png"
    alt="Fork me on GitHub">
    </a>


<div class="container-fluid">
    <div id="banner">
        <div class="pull-left">
            <div id="bannerLeft">
                <h2> Gradle Fury</h2>
            </div>
        </div>
        <div class="pull-right">
            <div id="bannerRight">
                <!-- override this with your own logo-->
                <img src="./img/logo.png"/>
            </div>
        </div>
        <div class="clear">
            <hr/>
        </div>
    </div>

    <div id="breadcrumbs">
        <ul class="breadcrumb">

            <li class="">
                <a href="http://chrisdoyle.com/" class="externalLink" title="[ c h r i s d o y l e ]">
                    [ c h r i s d o y l e ]</a>
                <span class="divider">/</span>
            </li>
            <li class="">
                <a href="http://chrisdoyle.github.io/gradle-fury/" class="externalLink" title="Gradle Fury">
                    Gradle Fury</a>

            </li>

            <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published:
                2016-10-16
            </li>
            <li id="projectVersion" class="pull-right">
                1.0.19
            </li>

        </ul>
    </div>


    <div class="row-fluid">
        <div id="leftColumn" class="span2">
            <div class="well sidebar-nav">


                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>

                    <li  >

                        <a href="index.html"><span class="none"></span>Introduction</a>
                    </li>

                    <!-- user generated menu goes here, basically any additional html or markdown files
                    from src/site are auto linked here-->
                     <li>

                                <a href="sampleAsciidoc.html" title="Sample Asciidoc">
                                    <span class="none"></span>
                                    Sample Asciidoc</a>
                            </li> <li>

                                <a href="sampleHtml.html" title="Sample Html">
                                    <span class="none"></span>
                                    Sample Html</a>
                            </li> <li>

                                <a href="sampleMarkdown.html" title="Sample Markdown">
                                    <span class="none"></span>
                                    Sample Markdown</a>
                            </li> <li>

                                <a href="wiki.html" title="Wiki">
                                    <span class="none"></span>
                                    Wiki</a>
                            </li>

                    <li class="nav-header">Project Documentation</li>

                    <li>

                        <a href="project-info.html" title="Project Information">
                            <span class="icon-chevron-down"></span>
                            Project Information</a>
                        <ul class="nav nav-list">

                            <li>

                                <a href="team-list.html" title="Project Team">
                                    <span class="none"></span>
                                    Project Team</a>
                            </li>

                            <li>

                                <a href="https://github.com/chrisdoyle/gradle-fury.git" title="Source Repository">
                                    <span class="none"></span>
                                    Source Repository</a>
                            </li>

                            <li>

                                <a href="https://github.com/chrisdoyle/gradle-fury/issues" title="Issue Tracking">
                                    <span class="none"></span>
                                    Issue Tracking</a>
                            </li>
                            <li>

                                <a href="project-license.html" title="Project License">
                                    <span class="none"></span>
                                    Project License</a>
                            </li>

                            <li>

                                <a href="dependency-repos.html" title="Dependency Repositories">
                                    <span class="none"></span>
                                    Dependency Repositories</a>
                            </li>


                            <li>

                                <a href="dependencyReport.html" title="Dependency Convergence">
                                    <span class="none"></span>
                                    Dependency Convergence</a>
                            </li>

<!-- maybe in the future
                            <li>

                                <a href="mail-lists.html" title="Mailing Lists">
                                    <span class="none"></span>
                                    Mailing Lists</a>
                            </li>

                            <li>

                                <a href="dependency-management.html" title="Dependency Management">
                                    <span class="none"></span>
                                    Dependency Management</a>
                            </li>


-->
                            <li>

                                <a href="https://travis-ci.org/chrisdoyle/gradle-fury" title="Continuous Integration">
                                    <span class="none"></span>
                                    Continuous Integration</a>
                            </li>
<!--
                            <li>

                                <a href="plugins.html" title="Project Plugins">
                                    <span class="none"></span>
                                    Project Plugins</a>
                            </li>
-->
                            <li>

                                <a href="https://github.com/chrisdoyle/gradle-fury/releases"
                                   title="Distribution Management">
                                    <span class="none"></span>
                                    Distribution Management</a>
                            </li>
                            <li>

                                <a href="javadoc.html" title="Project Javadocs">
                                    <span class="none"></span>
                                    Javadocs</a>

                            </li>
                            <li>

                                <a href="javadocAll/index.html" title="Project Javadocs">
                                    <span class="none"></span>
                                    Javadocs Aggregated</a>

                            </li>

                            <li>

                                <a href="reports.html" title="Project Reports">
                                    <span class="none"></span>
                                    Project Reports</a>

                            </li>

                        </ul>
                    </li>


                </ul>


                <hr/>


            </div>
        </div>


        <div id="bodyColumn" class="span10">
            <a name="topOfPage"></a>
            <h1>gradle-fury</h1>
<p><em>&quot;Before I could pull the trigger, I was hit by lightning and bitten by a cobra. I blacked out, and
saw images of ancient Shaolin temples and monks mastering the art of kung-fu. There was an ancient
prophecy about a new form of kung-fu so powerful, only one man can master it: The Chosen One. When I
woke up, I saw the kung-fu master running towards me. I could feel my body mutate, into some sort of
kung-fu freak of nature.&quot; --<a href="https://www.youtube.com/embed/bS5P_LAqiVg">Kung Fury</a></em></p>
<h2>Purpose</h2>
<p>An alternative Gradle helper to publish multi-flavored Android artifacts to local and remote Maven
repositories with pretty POM files using simple property configuration. It also provides a wide
variety of things that Maven provides out of the box, in gradle, such as encrypted credentials and
the maven site plugin.</p>
<h2>Why use Gradle-Fury</h2>
<p>Great question, with a sea of many maven publisher helpers (this along should raise a red flag that
something is wrong) what stands gradle-fury apart?</p>
<p>Check out <a href="https://github.com/chrisdoyle/gradle-fury/wiki">the wiki</a> for the most update to date set
of features. It's always growing and it's easier to update the wiki.</p>
<p>This notice will be removed/updated once the remaining versions are fixed</p>
<h2>Build Status</h2>
<p>Develop: <a href="https://travis-ci.org/chrisdoyle/gradle-fury"><img src="https://travis-ci.org/chrisdoyle/gradle-fury.svg?branch=develop" alt="Build Status" /></a>
Master: <a href="https://travis-ci.org/chrisdoyle/gradle-fury"><img src="https://travis-ci.org/chrisdoyle/gradle-fury.svg?branch=master" alt="Build Status" /></a></p>
<h2>Requirements</h2>
<p>Requirements for using Gradle-Fury</p>
<ul>
<li>JDK 7 or JDK 8 (depending on what gradle version and android plugin you're using)</li>
<li>For Android support, gradle android plugin v1.3.0 or higher, we test using a variety of configurations. See the <a href="https://github.com/chrisdoyle/gradle-fury/blob/develop/.travis.yml">Travis build matrix</a></li>
<li>For digital signature support, GPG must be installed on your computer. We test with gnugpg.</li>
</ul>
<p>Tested configurations for gradle and the android gradle build tools.</p>
<table>
<thead>
<tr><th>Gradle</th><th>Android Build Tools</th><th>JDK</th><th>Test Result</th></tr>
</thead>
<tbody>
<tr><td>3.1</td><td>2.2.0</td><td>8</td><td>OK</td></tr>
<tr><td>3.0</td><td>2.2.0</td><td>8</td><td>OK</td></tr>
<tr><td>2.14.1</td><td>2.1.3</td><td>7,8</td><td>OK</td></tr>
<tr><td>2.10</td><td>2.1.2</td><td>7,8</td><td>OK</td></tr>
<tr><td>2.14</td><td>2.1.0</td><td>7,8</td><td>OK</td></tr>
<tr><td>2.14</td><td>2.0.0</td><td>7,8</td><td>FAIL - Fails to generate poms for android projects, maven install local and publish to nexus</td></tr>
<tr><td>2.2.1</td><td>1.5.0</td><td>7,8</td><td>FAIL - Fails to generate poms for android projects, maven install local and publish to nexus</td></tr>
<tr><td>2.2.1</td><td>1.3.1</td><td>7,8</td><td>OK*</td></tr>
<tr><td>2.2.1</td><td>1.3.0</td><td>7,8</td><td>FAIL - Fails to generate poms for android projects, maven install local and publish to nexus</td></tr>
</tbody>
</table>
<p>So as long as you're not using one of those 3 versions of the android plugin, you're good to go.</p>
<ul>
<li>When using gradle 2.2.1 with the <code>application</code> or <code>distribution</code> and it's a Java project, there are
some problems with hooking in the install task with distZip (the thing that makes the distribution).
The fix is to include distZip with your command.</li>
</ul>
<table>
<thead>
<tr><th>Gradle</th><th>Build Command</th></tr>
</thead>
<tbody>
<tr><td>version &lt;= 2.2.1</td><td>gradlew clean distZip install</td></tr>
<tr><td>version &gt; 2.2.1</td><td>gradlew clean install</td></tr>
</tbody>
</table>
<p>Again, distZip this only applies if you're using gradle 2.2.1 AND you have a project module that uses
the (distribution OR application plugin) AND it's a Java project. I tried to tie it in, but I can't
make gold from lead - ao</p>
<h2>Usage</h2>
<p>Please refer to the dummy &quot;Hello World&quot; subprojects along with the provided root project
<code>build.gradle</code> and <code>gradle.properties</code> files included with this project as a general usage guide:</p>
<ul>
<li>Example Android Library: <a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-aar">hello-world-aar</a></li>
<li>Example Android Application: <a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-apk">hello-world-apk</a></li>
<li>Example Java Library: <a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-lib">hello-world-lib</a></li>
<li>Root <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/build.gradle">build.gradle</a></li>
<li>Root <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle.properties">gradle.properties</a></li>
</ul>
<h4>1. Create or modify the root gradle.properties file in your project</h4>
<p>This is the secret sauce.  I crave simplicity, and I just adore the idea of being able to house
simple project configuration in a singular, standard location in each of my projects, instead of
littering it in several locations throughout the codebase.</p>
<p>There are a handful of key properties which the <code>gradle-fury</code> helper scripts use to make the magic
happen, which are defined in the following sub-sections.</p>
<h5>Maven Repository (e.g. Sonatype Nexus Repository Manager) Configuration Properties</h5>
<p>Define the properties which are used by the <code>maven-publish</code> plugin for artifact publication:</p>
<ul>
<li>
<p>The <code>NEXUS_USERNAME</code> and <code>NEXUS_PASSWORD</code> properties define the username/password credentials used
to authenticate to the target repository.  Though the properties are prefixed with <code>NEXUS_</code>, they
could really apply to any Maven repository.</p>
</li>
<li>
<p>The <code>RELEASE_REPOSITORY_URL</code> and <code>SNAPSHOT_REPOSITORY_URL</code> properties define the
<a href="https://docs.gradle.org/current/userguide/publishing_maven.html#publishing_maven:repositories">repositories</a>
in the <code>PublishingExtension.getRepositories()</code> container.</p>
</li>
</ul>
<p>For example:</p>
<pre><code class="language-groovy">NEXUS_USERNAME=president.skroob
NEXUS_PASSWORD=12345

RELEASE_REPOSITORY_URL=https://oss.sonatype.org/service/local/staging/deploy/maven2/
SNAPSHOT_REPOSITORY_URL=https://oss.sonatype.org/content/repositories/snapshots/
</code></pre>
<h5>Android Configuration Properties</h5>
<p>Define the general
<a href="http://developer.android.com/tools/building/configuring-gradle.html">Android Build Configuration properties</a>
to apply to all Android Library and Application projects:</p>
<pre><code class="language-groovy">android.buildToolsVersion=23.0.2
android.compileSdkVersion=23
android.minSdkVersion=15
android.targetSdkVersion=23
</code></pre>
<p>Define the Android <code>versionCode</code> property (per the
<a href="http://developer.android.com/tools/publishing/versioning.html">Android Documentation</a>, &quot;an
integer value that represents the version of the application code, relative to other versions&quot;):</p>
<pre><code class="language-groovy">android.versionCode=1234
</code></pre>
<p>Define the app <a href="http://developer.android.com/tools/publishing/app-signing.html">signing configuration</a> for
Release artifacts:</p>
<pre><code class="language-groovy">android.signingConfigs.release.storeFile=/path/to/your/keystore.jks
android.signingConfigs.release.storePassword=Tr0ub4dor&amp;3
android.signingConfigs.release.keyAlias=MyAndroidKey
android.signingConfigs.release.keyPassword=correcthorsebatterystaple
</code></pre>
<h5>Maven POM Generation Properties</h5>
<p>These properties map directly to the properties defined in the
<a href="https://maven.apache.org/pom.html">Maven POM Reference</a> documentation:</p>
<pre><code class="language-groovy">pom.packaging
pom.name
pom.description
pom.url
pom.inceptionYear
pom.licenses.license.[n].name ***
pom.licenses.license.[n].url ***
pom.licenses.license.[n].distribution ***
pom.organization.name
pom.organization.url
pom.developers.developer.[n].id ***
pom.developers.developer.[n].name ***
pom.developers.developer.[n].email ***
pom.developers.developer.[n].organization ***
pom.developers.developer.[n].role.[n] ***
pom.issueManagement.system
pom.issueManagement.url
pom.ciManagement.system
pom.ciManagement.url
pom.scm.url
pom.scm.connection
pom.scm.developerConnection
pom.distributionManagement.site.id
pom.distributionManagement.site.url
</code></pre>
<p><strong>***NOTE</strong>: Multiple licenses, developers, and developer roles are supported by using a numeric
suffix <code>[n]</code> as an identifier for each entry; for example:</p>
<pre><code class="language-groovy">pom.developers.developer.0.id=kung.fury
pom.developers.developer.0.name=Kung Fury
pom.developers.developer.0.email=kungfury@knuckl.es
pom.developers.developer.0.organization=Miami Police Department
pom.developers.developer.0.role.0=Police Officer
pom.developers.developer.0.role.1=Kung Fu Master

pom.developers.developer.1.id=hackerman
pom.developers.developer.1.name=Hackerman
pom.developers.developer.1.email=hackerbot@hackerm.an
pom.developers.developer.1.organization=Hackerman Worldwide
pom.developers.developer.1.role.0=Computer Whiz
pom.developers.developer.1.role.1=Hackerbot
</code></pre>
<p>The included root <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle.properties">gradle.properties</a>
file may be used as a template.</p>
<h4>2. Modify the <code>allprojects</code> closure in your root project <code>build.gradle</code></h4>
<p>The required modifications consist of defining the default <code>project.group</code> and <code>project.version</code>
properties, and applying the
<a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle/maven-support.gradle">maven-support.gradle</a>
script in the <code>allprojects</code> closure, which will subsequently apply the configuration to all subprojects.</p>
<p>Please note that <code>project.group</code> and <code>project.version</code> <em>must</em> be defined before including
<a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle/maven-support.gradle">maven-support.gradle</a>
since it uses these values.  Also note that these property values may be overridden by individual
subprojects.</p>
<pre><code class="language-groovy">allprojects  {
    // NOTE: project.group and project.version must be defined before including
    // maven-support.gradle since it uses these values...
    project.group = ( project.hasProperty('pom.groupId')
            ? project.property('pom.groupId') : &quot;&quot; )

    project.version =
            ( project.hasProperty('pom.version') ? project.property('pom.version') : &quot;1.0&quot; )

    apply from: 'https://raw.githubusercontent.com/chrisdoyle/gradle-fury/master/gradle/maven-support.gradle'

		.
		.
		.

}
</code></pre>
<p>The included root <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/build.gradle">build.gradle</a>
file may be used as a reference for usage.</p>
<h4>3. Apply the <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle/android-support.gradle">android-support.gradle</a> script to each Android subproject <a href="https://github.com/chrisdoyle/gradle-fury/blob/master/gradle.properties">gradle.properties</a></h4>
<p>Add the following to the
<a href="https://github.com/chrisdoyle/gradle-fury/blob/master/build.gradle">build.gradle</a> of each Android
(Library or Application) subproject defined in your project:</p>
<pre><code class="language-groovy">apply from: 'https://raw.githubusercontent.com/chrisdoyle/gradle-fury/master/gradle/android-support.gradle'

</code></pre>
<p>ProTip: apply the <code>apply</code> line BEFORE the <code>android { ]</code> block. This will allow you to override any default values or
values defined within your gradle.properties file.</p>
<p>See the <code>build.gradle</code> files defined in the
<a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-aar">hello-world-aar</a>,
<a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-apk">hello-world-apk</a>,
<a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-apk-overrides">hello-world-apk-overrides</a>
example projects for reference.</p>
<p>Please note that no similar inclusions are required for standard Java subprojects, as illustrated in
the <a href="https://github.com/chrisdoyle/gradle-fury/tree/master/hello-world-lib">hello-world-lib</a> example
Java project.</p>
<h4>4. Publish multi-flavored Android artifacts with pretty POM files!</h4>
<h5>Install Artifacts to a Local <code>.m2</code> Repository</h5>
<pre><code class="language-bash">$ gradle clean build publishToMavenLocal
</code></pre>
<p><em>OR</em></p>
<pre><code class="language-bash">$ gradle clean build install
</code></pre>
<p>The Gradle pipeline has been hacked such that the <code>install</code> task invokes the <code>publishToMavenLocal</code>
task, along with a friendly &quot;warning&quot;.  Why?  Because the <code>install</code> task does not work with Android
projects.  See also the
<a href="https://github.com/chrisdoyle/gradle-fury/tree/develop#impetus-and-rage">Impetus and Rage</a> section
below.</p>
<p>Also, please note that at the time this project was published the
<a href="https://docs.gradle.org/current/userguide/publishing_maven.html">Gradle documentation for the really swell 'maven-plugin'</a>
indicated that its Maven publishing support was still in incubation, and that:</p>
<blockquote>
<p>Eventually this new publishing support will replace publishing via the Upload task.</p>
</blockquote>
<p>Don't hold your breath.  Apparently &quot;incubation&quot; is perpetual with Gradle.</p>
<h5>Publish Artifacts to a Remote Repository</h5>
<pre><code class="language-bash">$ gradle clean build publish
</code></pre>
<p><em>OR</em></p>
<pre><code class="language-bash">$ gradle clean build uploadArchives
</code></pre>
<p>Similar to the <code>install</code> task, the Gradle pipeline has been &quot;hacked&quot; such that the <code>uploadArchives</code>
task simply invokes the <code>publish</code> task, along with a friendly &quot;warning&quot;.  So technically, you should
be able to use <code>uploadArchives</code> in place of the <code>publish</code> task.</p>
<h5>Bonus: Javadoc and Source jars</h5>
<p>Gradle Fury supports build profiles (similar to how Maven does things). Here's the profiles that exist today and how to use them.</p>
<p>To generate Javadocs (Android projects included)</p>
<pre><code class="language-bash">$ gradle install -Pprofile=javadoc
</code></pre>
<p>To generate Sources (Android projects included)</p>
<pre><code class="language-bash">$ gradle install -Pprofile=sources
</code></pre>
<p>To generate Javadocs and Sources (Android projects included)</p>
<pre><code class="language-bash">$ gradle install -Pprofile=sources,javadoc
</code></pre>
<p><em>&quot;Well then. It's hacking time.&quot; --Kung Fury</em></p>
<h2>Publishing to maven central with GPG signatures</h2>
<p>Not tested yet, but there's a specific procedure in place. It's tempting to slam then all
together into a single command, but unfortunately it won't work. <em>Why?</em> Because gradle.</p>
<p><em>Seriously why?</em>
Well gradle simply won't let us do what needs to be done. It's lifecycle taskgraph thing
is strange and fires in all kinds of strange unintuitive ways. For instance, Android pom
generation is out of our hands. We can alter it but not control when it's written to disk.
That's a problem if you're trying to sign it. Unfortunately, we couldn't find a way to get
the hooks in place at the right time in the cycle to both sign and not get cleaned and still
be present in the right locations for the publish steps.</p>
<p>We're also not using the built in &quot;publish&quot; or &quot;uploadArchive&quot; task here because it does not
publish pom signatures correctly. It also uploads an additional variant of android libraries and APKs
for no apparent reason and we can't find a way to sign those before uploading.</p>
<pre><code class="language-bash">$ ./gradlew clean
$ ./gradlew install -Pprofile=sources,javadoc
$ ./gradlew publishArtifacts -Pprofile=sources,javadoc
</code></pre>
<h2>Publishing to Nexus like repos without GPG signatures</h2>
<pre><code class="language-bash">$ ./gradlew clean publish -Pprofile=sources,javadoc
</code></pre>
<h2>Encryption</h2>
<p>We searched high and low for an encrypted password capable maven helper and we couldn't find one.</p>
<p>So thanks for that. I have no problem storing my password in clear text nor sending my private gpg keys
to jcenter/bintray.</p>
<p>Wait a sec, that makes no sense at all.</p>
<h3>Make a master key</h3>
<pre><code class="language-bash">./gradlew generateMasterKey
</code></pre>
<p>The key is stored in <code>USER_HOME/.gradle/fury.properties</code>. Nuke that if there's an unexpected knock on the door.</p>
<h3>Encrypt a password</h3>
<pre><code class="language-bash">./gradlew encryptPassword -PstoreField=xyz
</code></pre>
<p>Where 'xyz' is one of the supported password Java properties keys that we use. They are (subject to change)</p>
<ul>
<li>NEXUS_PASSWORD</li>
<li>signing.passPhrase</li>
<li>GPG_PASSPHRASE</li>
<li>android.signingConfigs.release.storePassword</li>
<li>android.signingConfigs.release.keyPassword</li>
</ul>
<p>The encrypted password is then merged and written to 'local.properties' and picked up later in the build process.</p>
<p>You can also run the following...</p>
<h4>Encrypt without user interaction</h4>
<pre><code class="language-bash">./gradlew encryptPassword -PstoreField=NEXUS_PASSWORD -Ppassword=secret
</code></pre>
<h4>Just GPG sign the artifacts</h4>
<pre><code class="language-bash">./gradlew signArtifacts -Pprofile=javadoc,sources
</code></pre>
<h4>DIY approach</h4>
<pre><code class="language-bash">./gradlew encryptPassword
</code></pre>
<p>Then you'll have to manually edit local.properties to insert your cipher text.</p>
<h2>Gradle to Maven Scope Mappings</h2>
<table>
<thead>
<tr><th>Gradle qualifier</th><th>Maven Scope</th></tr>
</thead>
<tbody>
<tr><td>compile</td><td>compile</td></tr>
<tr><td>releaseCompile</td><td>compile</td></tr>
<tr><td>debugCompile</td><td>NOT MAPPED*</td></tr>
<tr><td>runtime</td><td>runtime</td></tr>
<tr><td>testCompile</td><td>test</td></tr>
<tr><td>androidTestCompile</td><td>test</td></tr>
<tr><td>provided</td><td>provided</td></tr>
</tbody>
</table>
<ul>
<li>Items marked as not mapped are not referenced in the pom. Pom's are
generally used for releases, such as, items specific to a scope, such as
'debugCompile' aren't useful since it won't be in the release version.</li>
</ul>
<h2>Quality Plugin</h2>
<p>Runs findbugs, checkstyle, and pmd on all your projects (android and java).
Based off the work <a href="https://github.com/MasonLiuChn/AndroidCodeQuality">done here</a>.</p>
<p>To apply to your project, apply this file under 'allprojects' then copy the files from gradle-fury/config and place it in your project</p>
<pre><code>allprojects {
        apply from 'https://raw.githubusercontent.com/chrisdoyle/gradle-fury/master/gradle/quality.gradle'
  }
</code></pre>
<p>then execute with <code>gradelw build</code></p>
<p>Since the checks can add a lot of time to your build, you probably want to make it optional...</p>
<pre><code> allprojects {
     if (project.hasProperty('profile') &amp;&amp; project.profile.split(',').contains(&quot;ci&quot;)) {
        apply from 'https://raw.githubusercontent.com/chrisdoyle/gradle-fury/master/gradle/quality.gradle'     }
  }
</code></pre>
<p>Then execute with <code>gradelw build -Pprofile=ci</code></p>
<h2>Maven Site Plugin</h2>
<h3>[Here's what it looks like][<a href="http://chrisdoyle.github.io/gradle-fury">http://chrisdoyle.github.io/gradle-fury</a>]</h3>
<p>Well it's not exactly the Maven Site Plugin, but it's our version of it. It's pretty darn close.
It uses theming inspired by <a href="http://maven.apache.org/skins/maven-fluido-skin/">Apache Fluido</a> and is loosely based
on the work Paul Speed-2 @ filament did over <a href="https://sourceforge.net/p/filament/code/HEAD/tree/trunk/site/build.gradle">here</a>.</p>
<p>Instead of the APT based sites, we opted for a simpler solution, a singular page template
which is then merged with generated content and your content using Markdown and the
<a href="https://github.com/atlassian/commonmark-java">Common Mark</a> renderer. We also
looked at <a href="https://github.com/sirthias/pegdown">Pegdown</a> but ran into performance issues.
<a href="https://github.com/asciidoctor/asciidoctorj">Asciidoc</a>/docbook</p>
<h3>Make the site</h3>
<p>Before making the site, you should run all your tests and any gradle tasks that generate reports.
If they were't created first, they won't be included with site generation.</p>
<p>Also before making, you need to make some directories and files.</p>
<pre><code class="language-bash">mkdir src
mkdir src/site/
</code></pre>
<p>Next, you'll want to grab all the files from gradle-fury's <a href="https://github.com/chrisdoyle/gradle-fury/tree/develop/src/site">src/site/</a>.
Put those files in your <code>src/site/</code> folder.</p>
<p>Next, create or edit <code>index.md</code>. This will be come your site's <code>index.html</code>, the first page people will look at it.</p>
<p><strong>Note:</strong> if you're looking for gradle-fury's index.md page, you won't find it. Instead, we copy this readme.md to the right place
and rename it.</p>
<p>Most Github flavored markdown tags are supported. You can also any files put in <code>src/site/</code> will
be included in the site. Any html or pdf files in the root <code>src/site/</code> will be auto-linked on the left hand site
navigation menu.</p>
<p>Finally, put this in your root build.gradle file. Do not place it within <code>allprojects</code>.</p>
<pre><code class="language-groovy">
apply from 'https://raw.githubusercontent.com/chrisdoyle/gradle-fury/master/gradle/site.gradle'

</code></pre>
<p>We also took some liberties from the maven-site-plugin. Many of the pages it generates can be reduced to just a link.
For instance, the location of the source (do we really need an entire web page that only shows the link to the source code?).
Same goes for CI, distro management and issue tracking.</p>
<pre><code class="language-bash">./gradlew install -Pprofile=javadoc,sources
# if needed, for distribution projects
./gradlew distZip -Pprofile=javadoc,sources
# if needed, for on device android test and reports
./gradlew cC
# if needed, for findbugs
./gradlew check
# if needed, for jacoco
./gradlew jacocoTestReport

# finally, generate the site
./gradlew site
</code></pre>
<p>The output goes to <code>rootDir/build/site/</code> and can be overridden with <code>ext.buildWebsiteDir = rootDir.absolutePath + &quot;/docs/&quot;</code></p>
<p>In the future, we may add some extra tasks for zipping up the site, deploying to an ftp or something else.</p>
<h3>What is generated by the site plugin?</h3>
<p>Here's a quick list</p>
<ul>
<li>Project Summary, all of the artifacts of your project, derived from the project itself and gradle.properties</li>
<li>Project Team, from gradle.properties</li>
<li>Links to the source, issue tracker, CI and distribution pages</li>
<li>All javadocs are included and linked</li>
<li>Project repository list, from gradle.properties</li>
<li>Dependency report - for all the artifacts of your project, derived from the project itself</li>
<li>Project reports - for all artifacts of the project, any and all things from the build/reports folder is included and linked (see the quality plugin). Includes test reports, connectedCheck, Findbugs, PMD, etc</li>
<li>Converts and themes all your .md and .asciidoc files from the root/src/site and links them in</li>
</ul>
<h2>Acknowledgements</h2>
<p>I absolutely want to extend a very sincere thanks to <a href="https://github.com/chrisbanes">Chris Banes</a>,
whose work served as the foundation and inspiration for this work.  I would not be anywhere had it
not been for his outstanding efforts to overcome several of the glaring deficiencies within Gradle's
&quot;support&quot; of basic development lifecycle operations -- you know, like simple artifact publishing.</p>
<ul>
<li><a href="https://github.com/chrisbanes/gradle-mvn-push">gradle-mvn-push</a></li>
<li><a href="http://chris.banes.me/2013/08/27/pushing-aars-to-maven-central/">Pushing AARs to Maven Central</a></li>
</ul>
<p>I have quoted it before, and here I am quoting it again:</p>
<p><em>&quot;If I have seen further than others, it is by standing upon the shoulders of giants.&quot; --Isaac Newton</em></p>
<h2>Impetus and Rage</h2>
<p>Don't get me started.</p>
<ul>
<li><a href="http://chrisdoyle.com/2016/01/25/please-enjoy-the-music/">Please enjoy the music</a></li>
<li><a href="https://discuss.gradle.org/t/how-can-i-upload-multiple-flavors-artifacts-with-different-pom-files-using-mavendeployer/5887">How can I upload multiple flavors/artifacts with different POM-files using mavenDeployer?</a></li>
<li><a href="http://stackoverflow.com/questions/18559932/gradle-maven-plugin-install-task-does-not-work-with-android-library-project">Gradle Maven plugin “install” task does not work with Android library project</a></li>
<li><a href="https://code.google.com/p/android/issues/detail?id=52962">Gradle plugin does not propagate debug/release to dependencies</a></li>
<li><a href="http://samskivert.com/blog/2015/03/gradle-difficutles/">samskivert: Gradle Difficulties</a></li>
<li><a href="https://discuss.gradle.org/t/how-to-publish-artifacts-signatures-asc-files-using-maven-publish-plugin/7422">It's not yet possible to upload artifact signatures...is not currently on our priority list.</a></li>
<li><a href="https://recordnotfound.com/gradle-js-danveloper-131869">Why can't our builds have the same levels of complexity and non-deterministic failures as our front end code does?</a></li>
</ul>
<p><em>&quot;Knock...kles&quot; --Kung Fury</em></p>
<h2>License</h2>
<p>Code is under the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache Licence v2</a>.</p>


        </div>
        <div id="iframenav" style="visibility:hidden">
        <center><h3><a name="iframeAnchor"></a><a href="#topOfPage"> -- Top --</a></h3>
            <a href="javascript:popout();">Load in a new window</a>
        </center>
        </div>

        <iframe id="frame1" width="100%" height="75%" style="display:none"></iframe>



    </div>
</div>

<hr/>

<footer>
    <div class="container-fluid">
        <div class="row-fluid">
            <!-- footer -->
        </div>


    </div>
</footer>

<div class="modal hide fade" id="modal1">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Artifact Details</h3>
    </div>
    <div class="modal-body">
        <h3>Gradle</h3>
        <pre id="gradleDep">

        </pre>
        <h3>Maven</h3>
        <pre id="mavenDep">

        </pre>
    </div>
    <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" >Close</a>
    </div>
</div>

<script type="text/javascript">

/**
*    opens the current iframe url in a new window or tab
*/
function popout(){
    var destination = $("#frame1").attr('src');
    var win = window.open(destination, '_blank');
    win.focus();
}

/**
*    displays a report and shows the iframe
*/
function showReport(url){
    $("#iframenav").css('visibility','');
    $("#frame1").show();
    $("#frame1").attr('src', url);
    $("#frame1").attr('height', window.innerHeight);
    window.location.assign("#iframeAnchor");
}

/**
* shows our maven/gradle helper modal
type is the file extension
*/
function showModal(group, artifact, version,type, classifier){

/**
if classifier and types
    foreach classifier
        foreach types
else if classifier
    foreach classifier
else if type
    foreah type
else
    just output it
*/
    //string outputs
    var maventxt ="";
    var gradle="";

    var hasClassifiers = classifier !== "" && classifier !== undefined;
    var hasTypes = type !== "" && type !== undefined;

    if (hasClassifiers && hasTypes){
        type = type.trim();
        var types = type.split(" ");
        classifier = classifier.trim();
        var classifiers = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            for (var k = 0; k < classifiers.length; k++) {
                if (classifiers[k].trim().length==0)
                    continue;
                maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                    "</artifactId>\n\t";
                maventxt += "<type>" + types[i].trim() + "</type>\n\t";
                maventxt += "<classifier>" + classifiers[k].trim() + "</classifier>\n\t";
                maventxt +="<version>" + version + "</version>\n</dependency>\n";

                gradle += "compile '" + group + ":" + artifact + ":" + version;
                gradle += ":" + classifiers[k].trim();
                gradle += "@" + types[i];
                gradle += "'\n";
            }

        }


    } else if (hasClassifiers) {
        classifier = classifier.trim();
        var types = classifier.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<classifier>" + types[i].trim() + "</classifier>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += ":" + types[i];
            gradle += "'\n";

        }
    } else if (hasTypes) {
        type = type.trim();
        var types = type.split(" ");
        for (var i = 0; i < types.length; i++) {
            if (types[i].trim().length==0)
                continue;
            maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
            maventxt += "<type>" + types[i].trim() + "</type>\n\t";
            maventxt +="<version>" + version + "</version>\n</dependency>\n";

            gradle += "compile '" + group + ":" + artifact + ":" + version;
            gradle += "@" + types[i];
            gradle += "'\n";

        }
    } else {
            //no type or classifiers
         maventxt+= "<dependency>\n\t<groupId>" + group + "</groupId>\n\t<artifactId>" + artifact+
                "</artifactId>\n\t";
         maventxt +="<version>" + version + "</version>\n</dependency>\n";
         gradle += "compile '" + group + ":" + artifact + ":" + version;
         gradle += "'\n";

    }

    $("#mavenDep").text(maventxt);
    $("#gradleDep").text(gradle);
    $('#modal1').modal()

}

$("table").addClass("table table-striped sortable");
$(function () {
    setNavigation();
});


/**
* this sets the "active" bit on the left hand side naviation menu
*/
function setNavigation() {
    var path = window.location.pathname;
    path = path.replace(/\/$/, "");
    path = decodeURIComponent(path);
    var idx=path.toString().lastIndexOf("/");
    if (idx >= 0)
        path=path.substring(idx+1, path.length);

    $(".nav a").each(function () {
        var href = $(this).attr('href');
        if (path.substring(0, href.length) === href) {
            $(this).closest('li').addClass('active');
        }
    });
}
</script>
</body>
</html>
